[tox]
envlist = py36-tests
skipsdist = true
minversion = 3.8.0
requires =
  tox-pip-extensions
  tox-pyenv
tox_pip_extensions_ext_venv_update = true
tox_pyenv_fallback = false

[testenv]
skip_install = true
sitepackages = {env:SITE_PACKAGES:false}
setenv = dev: PYTHONPATH = .
passenv =
    codecov: CI TRAVIS*
deps =
    {tests,lint}: .[tests]
    lint: pylint
    {checkformatting,format}: black
    coverage: coverage
    codecov: codecov
    pip-compile: pip-tools
whitelist_externals =
    {lint,format,checkformatting}: sh
commands =
    tests: coverage run -m pytest
    lint: sh -c "pylint {posargs:$(python setup.py  --name) tests}"
    format: sh -c "black {posargs:$(python setup.py  --name) tests}"
    checkformatting: sh -c "black --check {posargs:$(python setup.py  --name) tests}"
    coverage: coverage report --show-missing
    codecov: codecov
    pip-compile: pip-compile
