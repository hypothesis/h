{% macro annotation_card(annotation, request, group=none) -%}

<li class="annotation-card">
  <header class="annotation-card__header">
    <span>
      <a href="{{ request.route_url('activity.user_search', username=annotation.username) }}"
        class="annotation-card__username">
        {{ annotation.username }}
      </a>
      {% if group %}
        <a href="{{ request.route_url('group_read', pubid=group.pubid, slug=group.slug) }}"
          class="annotation-card__groupname">
            in
            {{ svg_icon('groups', 'annotation-card__groups-icon') }}
            {{ group.name }}
        </a>
      {% endif %}
    </span>
    <a href="{{ request.route_url('annotation', id=annotation.id) }}"
      class="annotation-card__timestamp">
      {{ annotation.updated.strftime('%d %b %Y') }}
    </a>
  </header>
  {% if annotation.quote %}
    <section class="annotation-card__quote">
      {{ annotation.quote|safe }}
    </section>
  {% endif %}
  <section class="annotation-card__text">
    {{ annotation.text_rendered|safe }}
  </section>
</li>
{%- endmacro %}
