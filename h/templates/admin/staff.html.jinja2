{% extends "h:templates/layouts/admin.html.jinja2" %}

{% set page_id = 'staff' %}
{% set page_title = 'Staff' %}

{% block content %}
  <p>
    On this page you can give users staff privileges! For example some features
    may be enabled for staff only.
  </p>

  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">Make a user into a staff member</h3>
    </div>
    <div class="panel-body">
      <form method="POST" class="form-inline">
        <input type="hidden" name="csrf_token" value="{{ get_csrf_token() }}">
        <div class="form-group">
          <label for="add">Username</label>
          <input type="text" class="form-control" name="add">
        </div>
        <div class="form-group">
          <label for="authority">Authority</label>
          <input type="text" class="form-control" name="authority" value="{{ default_authority }}">
          <input type="submit" class="btn btn-default" value="Add">
        </div>
      </form>
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">Current staff</h3>
    </div>
    <div class="panel-body">
      <form
        method="POST"
        action="{{ request.route_url('admin.staff') }}">
        <input type="hidden" name="csrf_token" value="{{ get_csrf_token() }}">
        <ul>
          {% for user in staff %}
            <li>
              {{ user }}
              <button type="submit" class="btn btn-link btn-sm"
                      name="remove" value="{{ user }}">
                Remove
              </button>
            </li>
          {% endfor %}
        </ul>
      </form>
    </div>
  </div>
{% endblock %}
