{% extends "h:templates/layouts/base.html.jinja2" %}

{% set style_bundle = 'site_css' %}

{% block page_title %}{{ group.name }}{% endblock page_title %}

{% set group_url = request.route_url('group_read', pubid=group.pubid, slug=group.slug) %}

{% block content %}
  <div class="content content--narrow">
    <div class="group-form is-member-of-group">
      <i class="h-icon-group group-form__heading-icon"></i>
      <div class="group-form__heading--short">{{ group.name }}</div>
      {% if document_links %}
        <a href="{{ request.route_url('stream') }}?q=group:{{ group.pubid }}"
           target="_blank"
           title="Recent annotations in this group">
           View recent group annotations</a>
      {% else %}
        <p class="group-form__nocontent-text">This group has not shared any annotations yet.</p>
      {% endif %}
    </div>
    {% if document_links %}
    <div class="group-document-list">
        <ul class="group-document-list__list">
        <p class="group-document-list__heading">Group documents:</p>
          {% for document_link in document_links %}
            <li>{{ document_link }}</li>
          {% endfor %}
        </ul>
    </div>
    {% endif %}
    {% if group.members %}
    <div class="group-members-list">
      <ul class="group-members-list__memberlist">
        <p class="group-members-list__heading">Group Members:</p>
        {% for member in group.members|sort(attribute='username')  %}
          <li>
            <a href="{{ request.route_url('stream') }}?q=group:{{ group.pubid }} user:{{ member.username }}"
              target="_blank"
              title="{{ member.username }}'s annotations in this group">
              {{ member.username }}
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}
    <div class="group-form-footer">
      <div class="group-form-footer__explain-text">
        {% include "about-groups.html.jinja2" %}
        <p class="group-form-footer__heading">Invite</p>
        Sharing the link below lets people join this group:
        <div class="share-link-field__container js-copy-button">
          <input class="share-link-field__input js-select-onfocus"
                 data-ref="input"
                 value="{{ group_url }}"
                 readonly>
          <button class="share-link-field__clipboard-button"
                  data-ref="button"
                  title="Copy to clipboard">
            <svg class="share-link-field__clipboard-image" version="1.1"
                 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <g stroke="none" stroke-width="1" fill-rule="evenodd">
                  <g>
                      <path d="M0,3.00684547 C0,2.45078007 0.447489426,2 0.998502329,2 L12.0014977,2 C12.5529553,2 13,2.44994876 13,3.00684547 L13,14.9931545 C13,15.5492199 12.5525106,16 12.0014977,16 L0.998502329,16 C0.44704472,16 0,15.5500512 0,14.9931545 L0,3.00684547 Z M2,2 L3,2 L3,4 L10,4 L10,2 L11,2 L11,5 L2,5 L2,2 Z" id="Rectangle-18-Copy-11"></path>
                      <path d="M5,1 L4.00292933,1 C3.43788135,1 3,1.44724809 3,1.99895656 L3,4 L10,4 L10,1.99895656 C10,1.44266033 9.55097324,1 8.99707067,1 L8,1 C8,0.443864822 7.55275191,0 7.00104344,0 L5.99895656,0 C5.44266033,0 5,0.44771525 5,1 Z" id="Rectangle-18-Copy-10"></path>
                      <path d="M6.5,2 C6.77614237,2 7,1.77614237 7,1.5 C7,1.22385763 6.77614237,1 6.5,1 C6.22385763,1 6,1.22385763 6,1.5 C6,1.77614237 6.22385763,2 6.5,2 Z" id="Oval-8"></path>
                  </g>
              </g>
          </svg>
        </div>
      </div>
    </div>
  </div>
{% endblock content %}
